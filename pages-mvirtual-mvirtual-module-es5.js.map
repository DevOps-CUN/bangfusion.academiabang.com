{"version":3,"sources":["webpack:///node_modules/dom-to-image-improved/src/dom-to-image-improved.js","webpack:///src/app/pages/mvirtual/mvirtual.page.html","webpack:///src/app/pages/mvirtual/mvirtual-routing.module.ts","webpack:///src/app/pages/mvirtual/mvirtual.module.ts","webpack:///src/app/pages/mvirtual/mvirtual.page.scss","webpack:///src/app/pages/mvirtual/mvirtual.page.ts"],"names":["global","util","newUtil","inliner","newInliner","fontFaces","newFontFaces","images","newImages","defaultOptions","imagePlaceholder","undefined","cacheBust","useCredentials","domtoimage","toSvg","toPng","toJpeg","toBlob","toPixelData","toCanvas","impl","options","module","exports","node","copyOptions","Promise","resolve","then","cloneNode","filter","embedFonts","inlineImages","applyOptions","clone","makeSvgDataUri","width","height","bgcolor","style","backgroundColor","Object","keys","forEach","property","draw","canvas","getContext","getImageData","data","toDataURL","quality","canvasToBlob","domNode","makeImage","delay","image","scale","console","log","newCanvas","ctx","drawImage","sx","sy","sw","sh","dx","dy","dw","dh","document","createElement","fillStyle","fillRect","root","makeNodeCopy","cloneChildren","processClone","HTMLCanvasElement","original","children","tagName","copyShadowChild","childNodes","length","cloneChildrenInOrder","asArray","parent","done","child","childClone","appendChild","getElementById","href","baseVal","replace","Element","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyStyle","window","getComputedStyle","isChrome","marker","source","target","cssText","font","copyProperties","name","setProperty","getPropertyValue","getPropertyPriority","element","clonePseudoElement","content","className","uid","currentClass","getAttribute","setAttribute","styleElement","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","createTextNode","map","formatProperty","join","HTMLTextAreaElement","innerHTML","value","HTMLInputElement","SVGElement","SVGRectElement","attribute","resolveAll","styleNode","inlineAll","XMLSerializer","serializeToString","escapeXhtml","xhtml","foreignObject","svg","escape","parseExtension","mimeType","dataAsUrl","isDataUrl","resolveUrl","getAndEncode","mimes","WOFF","JPEG","url","match","exec","extension","toLowerCase","search","binaryString","atob","split","binaryArray","Uint8Array","i","charCodeAt","Blob","type","baseUrl","doc","implementation","createHTMLDocument","base","head","a","body","index","fourRandomChars","Math","random","pow","toString","slice","uri","reject","Image","crossOrigin","onload","onerror","src","TIMEOUT","test","Date","getTime","request","XMLHttpRequest","onreadystatechange","ontimeout","timeout","responseType","withCredentials","open","send","placeholder","readyState","status","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","message","error","string","navigator","userAgent","ms","arg","setTimeout","arrayLike","array","push","leftBorder","px","rightBorder","scrollWidth","topBorder","bottomBorder","scrollHeight","styleProperty","parseFloat","URL_REGEX","shouldProcess","readUrls","inline","get","dataUrl","urlAsRegex","RegExp","nothingToInline","urls","readAll","webFonts","all","webFont","cssStrings","styleSheets","getCssRules","selectWebFontRules","rules","newWebFont","cssRules","rule","CSSRule","FONT_FACE_RULE","sheet","hasOwnProperty","bind","e","webFontRule","parentStyleSheet","newImage","inlineBackground","HTMLImageElement","background","inlined","routes","path","component","MvirtualPageRoutingModule","imports","forChild","MvirtualPageModule","declarations","MvirtualPage","serv","plt","router","pdf","id","num","nombre","ambiente","factor","personaje","solitario","solido","gaseoso","liquido","P1","P2","P3_1","P3_2","P3_3","P3_4","tarjeta","tarjeta2","idea1","idea2","idea3","idea4","ideaselecionada","aprendizaje","V","C","R","P","tipo","img","cont","currentTool","drawing","usingBrush","canvasWidth","canvasHeight","polygonSides","selectedColor","colors","lineWidth","loc","x","y","locI","shapeBoundingBox","left","top","mousedown","ruta","navigateByUrl","w","h","canvasElement","widt","AddItem","addItem","editar2","res","avanzar","mipromesa","boton","objaux","JSON","parse","getItem","toolClicked","ev","canvasPosition","getBoundingClientRect","touch","touches","changedTouches","saveX","pageX","saveY","pageY","SaveCanvasImage","brush","RedrawCanvasImage","UpdateRubberbandOnMove","selectcolor","currentX","currentY","lineJoin","strokeStyle","beginPath","moveTo","lineTo","closePath","stroke","color","canvasSizeData","X","Y","seguimiento","savedImageData","putImageData","rad","PI","toFixed","polygonPoints","getPolygonPoints","degrees","mouselocX","mouselocY","adjacent","opposite","radiansToDegrees","atan2","angle","degreesToRadians","getAngleUsingXAndY","radiusX","radiusY","PolygonPoint","sin","cos","strokeRect","radius","arc","ellipse","getPolygon","fillText","Textcontaux","abs","UpdateRubberbandSizeData","drawRubberbandShape","Textcont","template"],"mappings":"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","file":"pages-mvirtual-mvirtual-module-es5.js","sourcesContent":["(function(global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false,\n        // Use (existing) authentication credentials for external URIs (CORS requests)\n        useCredentials: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        toCanvas: toCanvas,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof exports === \"object\" && typeof module === \"object\")\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n     defaults to 1.0.\n     * @param {Number} options.scale - a Number multiplier to scale up the canvas before rendering to reduce fuzzy images, defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n        .then(function(node) {\n            return cloneNode(node, options.filter, true);\n        })\n        .then(embedFonts)\n        .then(inlineImages)\n        .then(applyOptions)\n        .then(function(clone) {\n            return makeSvgDataUri(clone,\n              options.width || util.width(node),\n              options.height || util.height(node)\n            );\n        });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function(property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n        .then(function(canvas) {\n            return canvas.getContext('2d').getImageData(\n              0,\n              0,\n              util.width(node),\n              util.height(node)\n            ).data;\n        });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n        .then(function(canvas) {\n            return canvas.toDataURL();\n        });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n        .then(function(canvas) {\n            return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n        });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n        .then(util.canvasToBlob);\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a canvas object\n     * */\n    function toCanvas(node, options) {\n        return draw(node, options || {});\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if (typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if (typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n\n        if(typeof(options.useCredentials) === 'undefined') {\n            domtoimage.impl.options.useCredentials = defaultOptions.useCredentials;\n        } else {\n            domtoimage.impl.options.useCredentials = options.useCredentials;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n        .then(util.makeImage)\n        .then(util.delay(100))\n        .then(function(image) {\n            var scale = typeof(options.scale) !== 'number' ? 1 : options.scale;\n            console.log('scale', scale);\n            var canvas = newCanvas(domNode, scale);\n            var ctx = canvas.getContext('2d');\n            if (image) {\n                //console.log('should be scaled', image);\n                ctx.scale(scale, scale);\n                //canvas.height = 620;\n                //ctx.drawImage(image, 150, 600, 1150, 700, 0, 0, 1150, 700);\n                // canvas.height = options.image.height + 50;\n                // //canvas.width = options.image.width - 135;// - options.image.offsetRight\n                // canvas.width = options.image.width - options.image.offsetRight - options.image.offsetLeft + 60;\n                // ctx.drawImage(image, options.image.offsetLeft, options.image.offsetTop - 50, options.image.width, options.image.height + 50, 0, 0, options.image.width, options.image.height);\n\n                if (options.canvas && options.canvas.width) {\n                    canvas.width = options.canvas.width;\n                }\n\n                if (options.canvas && options.canvas.height) {\n                    canvas.height = options.canvas.height;\n                }\n\n                if (options.canvas) {\n                    console.log('canv', options.canvas);\n                    ctx.drawImage(\n                      image,\n                      options.canvas.sx  || 0,\n                      options.canvas.sy || 0,\n                      options.canvas.sw || options.width,\n                      options.canvas.sh || options.height,\n                      options.canvas.dx || 0,\n                      options.canvas.dy || 0,\n                      options.canvas.dw || options.width,\n                      options.canvas.dh || options.height\n                    );\n                } else {\n                    ctx.drawImage(image, 0, 0);\n                }\n\n            }\n            return canvas;\n        });\n\n        function newCanvas(domNode, scale) {\n            var canvas = document.createElement('canvas');\n            canvas.width = (options.width || util.width(domNode)) * scale;\n            canvas.height = (options.height || util.height(domNode)) * scale;\n\n            console.log(canvas.width, canvas.height);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n        .then(makeNodeCopy)\n        .then(function(clone) {\n            return cloneChildren(node, clone, filter);\n        })\n        .then(function(clone) {\n            return processClone(node, clone);\n        });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.tagName === 'use' ? copyShadowChild(original) : original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n            .then(function() {\n                return clone;\n            });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function(child) {\n                    done = done\n                    .then(function() {\n                        return cloneNode(child, filter);\n                    })\n                    .then(function(childClone) {\n                        if (childClone) parent.appendChild(childClone);\n                    });\n                });\n                return done;\n            }\n        }\n\n        function copyShadowChild(original) {\n            var child = document.getElementById(original.href.baseVal.replace('#', ''));\n            return [child.cloneNode(true)];\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n            .then(cloneStyle)\n            .then(clonePseudoElements)\n            .then(copyUserInput)\n            .then(fixSvg)\n            .then(function() {\n                return clone;\n            });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                if (util.isChrome() && clone.style.marker && ( clone.tagName === 'line' || clone.tagName === 'path')) {\n                    clone.style.marker = '';\n                }\n\n                function copyStyle(source, target) {\n                    if (source.cssText) {\n                        target.cssText = source.cssText;\n                        target.font = source.font; // here, we re-assign the font prop.\n                    } else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function(name) {\n                            target.setProperty(\n                              name,\n                              source.getPropertyValue(name),\n                              source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function(element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    var currentClass = clone.getAttribute('class');\n                    if (currentClass) {\n                        clone.setAttribute('class', currentClass + ' ' + className);\n                    }\n\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                            .map(formatProperty)\n                            .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                  style.getPropertyValue(name) +\n                                  (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function(attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n        .then(function(cssText) {\n            var styleNode = document.createElement('style');\n            node.appendChild(styleNode);\n            styleNode.appendChild(document.createTextNode(cssText));\n            return node;\n        });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n        .then(function() {\n            return node;\n        });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n        .then(function(node) {\n            node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n            return new XMLSerializer().serializeToString(node);\n        })\n        .then(util.escapeXhtml)\n        .then(function(xhtml) {\n            return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n        })\n        .then(function(foreignObject) {\n            return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n              foreignObject + '</svg>';\n        })\n        .then(function(svg) {\n            return 'data:image/svg+xml;charset=utf-8,' + svg;\n        });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            isChrome: isChrome,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)(\\?|$)/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function(resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function(resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function() {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            if (uri === 'data:,') return Promise.resolve();\n            return new Promise(function(resolve, reject) {\n                var image = new Image();\n                if(domtoimage.impl.options.useCredentials) {\n                    image.crossOrigin = 'use-credentials';\n                }\n                image.onload = function() {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if (domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function(resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                if(domtoimage.impl.options.useCredentials) {\n                    request.withCredentials = true;\n                }\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if (domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if (split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if (placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function() {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if (placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function isChrome() {\n            return /chrome/i.test( navigator.userAgent );\n        }\n\n        function delay(ms) {\n            return function(arg) {\n                return new Promise(function(resolve) {\n                    setTimeout(function() {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function(url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n            .then(function(url) {\n                return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n            })\n            .then(get || util.getAndEncode)\n            .then(function(data) {\n                return util.dataAsUrl(data, util.mimeType(url));\n            })\n            .then(function(dataUrl) {\n                return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n            });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n            .then(readUrls)\n            .then(function(urls) {\n                var done = Promise.resolve(string);\n                urls.forEach(function(url) {\n                    done = done.then(function(string) {\n                        return inline(string, url, baseUrl, get);\n                    });\n                });\n                return done;\n            });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n            .then(function(webFonts) {\n                return Promise.all(\n                  webFonts.map(function(webFont) {\n                      return webFont.resolve();\n                  })\n                );\n            })\n            .then(function(cssStrings) {\n                return cssStrings.join('\\n');\n            });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n            .then(getCssRules)\n            .then(selectWebFontRules)\n            .then(function(rules) {\n                return rules.map(newWebFont);\n            });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                .filter(function(rule) {\n                    return rule.type === CSSRule.FONT_FACE_RULE;\n                })\n                .filter(function(rule) {\n                    return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function(sheet) {\n                    if (sheet.hasOwnProperty(\"cssRules\")) {\n                        try {\n                            util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                        } catch (e) {\n                            console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                        }\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function() {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                .then(get || util.getAndEncode)\n                .then(function(data) {\n                    return util.dataAsUrl(data, util.mimeType(element.src));\n                })\n                .then(function(dataUrl) {\n                    return new Promise(function(resolve, reject) {\n                        element.onload = resolve;\n                        // for any image with invalid src(such as <img src />), just ignore it\n                        element.onerror = resolve;\n                        element.src = dataUrl;\n                    });\n                });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n            .then(function() {\n                if (node instanceof HTMLImageElement)\n                    return newImage(node).inline();\n                else\n                    return Promise.all(\n                      util.asArray(node.childNodes).map(function(child) {\n                          return inlineAll(child);\n                      })\n                    );\n            });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                .then(function(inlined) {\n                    node.style.setProperty(\n                      'background',\n                      inlined,\n                      node.style.getPropertyPriority('background')\n                    );\n                })\n                .then(function() {\n                    return node;\n                });\n            }\n        }\n    }\n})(this);\n","export default \"<div class=\\\"wrapper\\\" >\\n  <div class=\\\"toolbar\\\">\\n    <img (click)=\\\"navegar('virtual')\\\" src=\\\"assets/imgs/Botones/Botn_atras.png\\\" class=\\\"atras\\\">\\n    <a class=\\\"selected\\\" id=\\\"open\\\" (click)=\\\"Guardar();\\\"\\n      ><img src=\\\"assets/imgs/Iconos/save-icon.png\\\"\\n    /></a>\\n    <a  id=\\\"text\\\" (click)=\\\"ChangeTool('text');\\\"\\n      ><img src=\\\"assets/imgs/Iconos/text-icon.png\\\"\\n    /></a>\\n    <a id=\\\"brush\\\" (click)=\\\"ChangeTool('brush');\\\"\\n      ><img src=\\\"assets/imgs/Iconos/brush-icon.png\\\"\\n    /></a>\\n    <a id=\\\"line\\\" (click)=\\\"ChangeTool('line');\\\"\\n      ><img src=\\\"assets/imgs/Iconos/line-icon.png\\\"\\n    /></a>\\n    <a  id=\\\"rectangle\\\" (click)=\\\"ChangeTool('rectangle');\\\"\\n      ><img src=\\\"assets/imgs/Iconos/rectangle-icon.png\\\"\\n    /></a>\\n    <a  id=\\\"circle\\\" (click)=\\\"ChangeTool('circle');\\\"\\n      ><img src=\\\"assets/imgs/Iconos/circle-icon.png\\\"\\n    /></a>\\n    <a  id=\\\"ellipse\\\" (click)=\\\"ChangeTool('ellipse');\\\"\\n      ><img src=\\\"assets/imgs/Iconos/ellipse-icon.png\\\"\\n    /></a>\\n    <a  id=\\\"polygon\\\" (click)=\\\"ChangeTool('polygon');\\\"\\n      ><img src=\\\"assets/imgs/Iconos/polygon-icon.png\\\"\\n    /></a>\\n    <a  id=\\\"eraser\\\" (click)=\\\"ChangeTool('eraser');\\\"\\n    ><img src=\\\"assets/imgs/Iconos/eraser-icon.png\\\"\\n  /></a>\\n  </div>\\n</div>\\n<ion-content class=\\\"fondo\\\" [forceOverscroll]=\\\"false\\\">\\n  <ion-row>\\n    <ion-col *ngFor=\\\"let color of colors\\\" [style.background]=\\\"color\\\" class=\\\"color-block\\\" tappable\\n      (click)=\\\"selectColor(color)\\\"></ion-col>\\n  </ion-row>\\n  <ion-radio-group [(ngModel)]=\\\"selectedColor\\\">\\n    <ion-row>\\n      <ion-col class=\\\"llenado\\\" *ngFor=\\\"let color of colors\\\" class=\\\"ion-text-center\\\">\\n        <ion-radio  [value]=\\\"color\\\"></ion-radio>\\n      </ion-col>\\n    </ion-row>\\n  </ion-radio-group>\\n \\n  <ion-range min=\\\"2\\\" max=\\\"20\\\"[(ngModel)]=\\\"lineWidth\\\">\\n    <ion-icon size=\\\"small\\\" slot=\\\"start\\\" name=\\\"brush\\\"></ion-icon>\\n    <ion-icon slot=\\\"end\\\" name=\\\"brush\\\"></ion-icon>\\n  </ion-range>\\n \\n  <canvas id=\\\"imageCanvas\\\" #imageCanvas (mousedown)=\\\"startDrawing($event)\\\" (touchstart)=\\\"startDrawing($event)\\\"\\n    (touchmove)=\\\"moved($event)\\\" (mousemove)=\\\"moved($event)\\\" (mouseup)=\\\"endDrawing($event)\\\" (touchend)=\\\"endDrawing($event)\\\"></canvas>\\n    <ion-textarea *ngIf=\\\"boton==false\\\"\\n    class=\\\"input_Text\\\"\\n    [(ngModel)]=\\\"Textcontaux\\\"\\n    autofocus=\\\"true\\\"\\n    placeholder=\\\" Escribe aqui...\\\"\\n    autoGrow=\\\"false\\\"\\n    wrap=\\\"hard\\\"\\n    rows=\\\"3\\\"\\n  ></ion-textarea>\\n  <ion-button (click)=\\\"navegar('fisico/ultimas')\\\" expand=\\\"full\\\" *ngIf=\\\"(boton==true) && (avanzar==true)\\\">\\n    <ion-icon slot=\\\"start\\\"></ion-icon>\\n      FINALIZAR\\n  </ion-button>\\n  <ion-button expand=\\\"full\\\" *ngIf=\\\"boton==false\\\" >\\n    <ion-icon slot=\\\"start\\\"></ion-icon>\\n    PONER NOTA\\n  </ion-button>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MvirtualPage } from './mvirtual.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MvirtualPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MvirtualPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MvirtualPageRoutingModule } from './mvirtual-routing.module';\n\nimport { MvirtualPage } from './mvirtual.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MvirtualPageRoutingModule\n  ],\n  declarations: [MvirtualPage]\n})\nexport class MvirtualPageModule {}\n","export default \".wrapper {\\n  background-color: #9b9999;\\n  max-width: 900px;\\n  font-family: \\\"Arial\\\";\\n}\\n\\n.fondo {\\n  background-color: #FFFF;\\n}\\n\\nion-page {\\n  background-color: #FFFF;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  bottom: 0;\\n  display: flex;\\n  position: absolute;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  contain: layout size style;\\n  overflow: hidden;\\n  z-index: 0;\\n}\\n\\nbackground-content {\\n  left: 0px;\\n  right: 0px;\\n  top: calc(var(--offset-top) * -1);\\n  bottom: calc(var(--offset-bottom) * -1);\\n  position: absolute;\\n  background: #9b9999;\\n}\\n\\nion-content {\\n  background-color: #FFFF;\\n}\\n\\nion-radio-group {\\n  background-color: #FFFF;\\n}\\n\\n#imageCanvas {\\n  background-color: #FFFF;\\n}\\n\\n#cont {\\n  height: auto;\\n  width: 100vw;\\n}\\n\\n.toolbar {\\n  width: 100%;\\n  background-color: #9b9999;\\n  overflow: auto;\\n  height: 6vh;\\n}\\n\\n.llenado {\\n  background-color: whitesmoke;\\n}\\n\\n.toolbar a {\\n  float: left;\\n  width: 11%;\\n  text-align: center;\\n  padding: 6px 5px;\\n  transition: all 0.5s ease;\\n  color: white;\\n}\\n\\n.hydrated {\\n  visibility: inherit;\\n  background-color: #6d6c6c;\\n}\\n\\n/* Change color on hover */\\n\\n.toolbar a:hover {\\n  background-color: #000;\\n}\\n\\n/* Change color on selected icon */\\n\\n.selected {\\n  background-color: #8b8b8b;\\n}\\n\\n#mycanvas {\\n  width: 100%;\\n}\\n\\n#img-data-div {\\n  width: 100%;\\n  max-width: 900px;\\n  height: 200px;\\n}\\n\\n/* Resize image to container */\\n\\n.toolbar a img {\\n  max-width: 100%;\\n  height: auto;\\n}\\n\\n.input_Text {\\n  background-color: #FFFF;\\n  border-radius: 5px;\\n  font-family: \\\"Delius\\\";\\n  color: black;\\n  padding-left: 10px;\\n  padding-right: 10px;\\n}\\n\\n.atras {\\n  position: absolute;\\n  position: absolute;\\n  left: 1.5vh;\\n  top: 93.5vh;\\n  width: 10vw;\\n  height: 6vh;\\n  z-index: 1;\\n}\\n\\nion-range {\\n  background-color: #141414;\\n  padding-top: 0;\\n  padding-bottom: 0;\\n}\\n\\nion-button {\\n  height: 6vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbXZpcnR1YWwvbXZpcnR1YWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUJBQUE7RUFDRSxnQkFBQTtFQUNBLG9CQUFBO0FBQ0o7O0FBQ0E7RUFDRSx1QkFBQTtBQUVGOztBQUFBO0VBQ0UsdUJBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLE1BQUE7RUFDQSxTQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0Esc0JBQUE7RUFDQSw4QkFBQTtFQUNBLDBCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxVQUFBO0FBR0Y7O0FBREE7RUFDRSxTQUFBO0VBQ0EsVUFBQTtFQUNBLGlDQUFBO0VBQ0EsdUNBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0FBSUY7O0FBRkE7RUFDRSx1QkFBQTtBQUtGOztBQUhBO0VBQ0UsdUJBQUE7QUFNRjs7QUFKQTtFQUNFLHVCQUFBO0FBT0Y7O0FBTEE7RUFDRSxZQUFBO0VBQ0EsWUFBQTtBQVFGOztBQU5FO0VBQ0UsV0FBQTtFQUNBLHlCQUFBO0VBQ0EsY0FBQTtFQUNBLFdBQUE7QUFTSjs7QUFQRTtFQUNFLDRCQUFBO0FBVUo7O0FBUkU7RUFDRSxXQUFBO0VBQ0EsVUFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSx5QkFBQTtFQUNBLFlBQUE7QUFXSjs7QUFURTtFQUNFLG1CQUFBO0VBQ0EseUJBQUE7QUFZSjs7QUFWRSwwQkFBQTs7QUFDQTtFQUNFLHNCQUFBO0FBYUo7O0FBVkUsa0NBQUE7O0FBQ0E7RUFDRSx5QkFBQTtBQWFKOztBQVZFO0VBQ0UsV0FBQTtBQWFKOztBQVZFO0VBQ0UsV0FBQTtFQUNBLGdCQUFBO0VBQ0EsYUFBQTtBQWFKOztBQVZFLDhCQUFBOztBQUNBO0VBQ0UsZUFBQTtFQUNBLFlBQUE7QUFhSjs7QUFYQTtFQUNJLHVCQUFBO0VBQ0Esa0JBQUE7RUFDQSxxQkFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0FBY0o7O0FBWkU7RUFDRSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtFQUNBLFVBQUE7QUFlSjs7QUFiQTtFQUNJLHlCQUFBO0VBQ0EsY0FBQTtFQUNBLGlCQUFBO0FBZ0JKOztBQWRBO0VBQ0ksV0FBQTtBQWlCSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL212aXJ0dWFsL212aXJ0dWFsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi53cmFwcGVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzliOTk5OTtcbiAgICBtYXgtd2lkdGg6IDkwMHB4O1xuICAgIGZvbnQtZmFtaWx5OiBcIkFyaWFsXCI7XG4gIH1cbi5mb25kb3tcbiAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkY7XG59XG5pb24tcGFnZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNGRkZGO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBjb250YWluOiBsYXlvdXQgc2l6ZSBzdHlsZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgei1pbmRleDogMDtcbn1cbmJhY2tncm91bmQtY29udGVudCB7XG4gIGxlZnQ6IDBweDtcbiAgcmlnaHQ6IDBweDtcbiAgdG9wOiBjYWxjKHZhcigtLW9mZnNldC10b3ApICogLTEpO1xuICBib3R0b206IGNhbGModmFyKC0tb2Zmc2V0LWJvdHRvbSkgKiAtMSk7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYmFja2dyb3VuZDojOWI5OTk5IDtcbn1cbmlvbi1jb250ZW50e1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRjtcbn1cbmlvbi1yYWRpby1ncm91cHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkY7XG59XG4jaW1hZ2VDYW52YXN7XG4gIGJhY2tncm91bmQtY29sb3I6ICNGRkZGO1xufVxuI2NvbnR7XG4gIGhlaWdodDogYXV0bztcbiAgd2lkdGg6MTAwdncgO1xufVxuICAudG9vbGJhciB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzliOTk5OTtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBoZWlnaHQ6IDZ2aDtcbiAgfVxuICAubGxlbmFkb3tcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZXNtb2tlXG4gIH1cbiAgLnRvb2xiYXIgYSB7XG4gICAgZmxvYXQ6IGxlZnQ7XG4gICAgd2lkdGg6IDExJTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgcGFkZGluZzogNnB4IDVweDtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgfVxuICAuaHlkcmF0ZWQge1xuICAgIHZpc2liaWxpdHk6IGluaGVyaXQ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDEwOSwgMTA4LCAxMDgpO1xufVxuICAvKiBDaGFuZ2UgY29sb3Igb24gaG92ZXIgKi9cbiAgLnRvb2xiYXIgYTpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcbiAgfVxuICBcbiAgLyogQ2hhbmdlIGNvbG9yIG9uIHNlbGVjdGVkIGljb24gKi9cbiAgLnNlbGVjdGVkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTM5LCAxMzksIDEzOSk7XG4gIH1cbiAgXG4gICNteWNhbnZhcyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cbiAgXG4gICNpbWctZGF0YS1kaXYge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIG1heC13aWR0aDogOTAwcHg7XG4gICAgaGVpZ2h0OiAyMDBweDtcbiAgfVxuICBcbiAgLyogUmVzaXplIGltYWdlIHRvIGNvbnRhaW5lciAqL1xuICAudG9vbGJhciBhIGltZyB7XG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogYXV0bztcbiAgfVxuLmlucHV0X1RleHR7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkY7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIGZvbnQtZmFtaWx5OiBcIkRlbGl1c1wiO1xuICAgIGNvbG9yOiByZ2IoMCwgMCwgMCk7XG4gICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICAgIHBhZGRpbmctcmlnaHQ6IDEwcHg7XG4gIH1cbiAgLmF0cmFze1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogMS41dmg7XG4gICAgdG9wOiA5My41dmg7XG4gICAgd2lkdGg6IDEwdnc7XG4gICAgaGVpZ2h0OiA2dmg7XG4gICAgei1pbmRleDogMTtcbiAgfVxuaW9uLXJhbmdle1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYigyMCwgMjAsIDIwKTtcbiAgICBwYWRkaW5nLXRvcDogMDtcbiAgICBwYWRkaW5nLWJvdHRvbTogMDtcbiAgfVxuaW9uLWJ1dHRvbntcbiAgICBoZWlnaHQ6IDZ2aDtcbiAgfSJdfQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Platform } from '@ionic/angular';\nimport domToImage from 'dom-to-image-improved';\nimport { Pdf, ServicioService } from 'src/app/services/servicio.service';\n\n@Component({\n  selector: 'app-mvirtual',\n  templateUrl: './mvirtual.page.html',\n  styleUrls: ['./mvirtual.page.scss'],\n})\n// Stores size data used to create rubber band shapes\n// that will redraw as the user moves the mouse\nexport class MvirtualPage implements OnInit {\n    @ViewChild('mycanvas',{static:false})canvas: any;\n\n// pdf\nobjaux: Pdf;\npdf:Pdf={\n  id :'',\n  num:'',\n  nombre:'',\n  ambiente:'',\n  factor:'',\n  personaje:'',\n  solitario:true,\n  solido:'',\n  gaseoso:'',\n  liquido:'',\n  P1:'',\n  P2:'',\n  P3_1:'',\n  P3_2:'',\n  P3_3:'',\n  P3_4:'',\n  tarjeta:'',\n  tarjeta2:'',\n  idea1:'',\n  idea2:'',\n  idea3:'',\n  idea4:'',\n  ideaselecionada:'',\n  aprendizaje:'',\n  V:'',\n  C:'',\n  R:'',\n  P:'',\n  tipo:'',\n  img:''\n};\n\n//\n    avanzar;\n    ctx;\n    canvasElement: any;\n    cont=0;\n    boton:boolean;\n    Textcont;\n    Textcontaux;\n    savedImageData;\n    currentTool = 'brush';\n    drawing = false;\n    usingBrush = false;\n    canvasWidth = 600;\n    canvasHeight = 600;\n    // navegar atras y adelante\n    navegar(ruta){\n      this.router.navigateByUrl(ruta);\n    }\n    //zloc = new Location;\n    // envio de imagen\n    Guardar(){\n      const w:any = document.getElementById(\"imageCanvas\").style.width;\n      const h:any= document.getElementById(\"imageCanvas\").style.height;\n      domToImage.toPng(document.getElementById(\"imageCanvas\"),{width: this.canvasElement.widt, height: this.canvasElement.height}).then((canvas)=>{\n        if (canvas) {\n            var img =  canvas;\n            this.pdf.img=img;\n            this.serv.AddItem(this.pdf);\n            this.serv.addItem(this.pdf);\n            this.serv.editar2(this.pdf.id,this.pdf,this.pdf.num);\n          }\n          return null;\n       }).catch((res) => {\n        console.log(\"Este es el error\",res);\n        return res;\n    });\n    this.avanzar=true;\n    }\n    //\n    saveX: number;\n    saveY: number;\n    polygonSides = 6;\n    selectedColor = '#9e2956';\n    colors = [ '#9e2956', '#c2281d', '#de722f', '#edbf4c', '#5db37e', '#459cde', '#4250ad', '#802fa3' ];\n    lineWidth = 5;\n    loc:any={x:null,y:null};\n    locI:any={x:null,y:null};\n    shapeBoundingBox:any={left:0,top:0,width:0,height:0};\n    mousedown :any={x:0,y:0}\n    constructor(private serv: ServicioService,private plt: Platform,private router:Router) {}\n    async ngOnInit(){\n      this.avanzar=false;\n      this.mipromesa();\n      this.canvasElement = document.getElementById('imageCanvas');\n      this.canvasElement.width = this.plt.width() + '';\n      this.canvasWidth=this.canvasElement.width;\n      this.canvasElement.height = 445;\n      this.canvasHeight=this.canvasElement.height;\n      this.boton=true;\n      this.ctx = this.canvasElement.getContext('2d');\n    }\n    async mipromesa(){\n      new Promise((resolve) => {\n        this.objaux = JSON.parse(this.serv.getItem('_cap_pdf2'));\n         this.pdf=  this.objaux; \n\n     });\n   }\n    ChangeTool(toolClicked){\n        console.log(\"herramienta:\", toolClicked);\n          document.getElementById(\"open\").className = \"\";\n          document.getElementById(\"text\").className = \"\";\n          document.getElementById(\"brush\").className = \"\";\n          document.getElementById(\"line\").className = \"\";\n          document.getElementById(\"rectangle\").className = \"\";\n          document.getElementById(\"circle\").className = \"\";\n          document.getElementById(\"ellipse\").className = \"\";\n          document.getElementById(\"polygon\").className = \"\";\n          document.getElementById(\"eraser\").className = \"\";\n          document.getElementById(toolClicked).className = \"selected\";\n          this.currentTool = toolClicked;\n          if(this.currentTool=='text'){\n            this.boton=false\n          }\n      }\n    startDrawing(ev) {\n      this.drawing = true;\n      var canvasPosition = this.canvasElement.getBoundingClientRect();\n      if(ev.type == 'touchstart' || ev.type == 'touchmove' || ev.type == 'touchend'){\n        var touch = ev.touches[0] || ev.changedTouches[0];\n        this.saveX = touch.pageX- canvasPosition.x;\n        this.saveY = touch.pageY- canvasPosition .y;\n      }\n      else{\n        this.saveX = ev.pageX - canvasPosition.x;\n        this.saveY = ev.pageY - canvasPosition.y;\n      }\n      this.loc.x=this.saveX;\n      this.loc.y=this.saveY;\n      this.SaveCanvasImage();\n    } \n    endDrawing(ev) {\n      if (this.currentTool=='brush'||this.currentTool=='eraser') {\n        this.brush(ev);\n      }\n      else if(this.usingBrush==false){\n        this.RedrawCanvasImage();\n        this.UpdateRubberbandOnMove(this.loc,ev);\n      }\n      this.cont=0;\n      this.drawing = false;\n      this.usingBrush = false;\n    }\n    brush(ev){\n      let selectcolor;\n      if (!this.drawing) return;\n      if(this.currentTool=='eraser'){\n        selectcolor = '#FFFF';\n        selectcolor= '#FFFF';\n      }\n      else{\n        selectcolor = this.selectedColor;\n        selectcolor = this.selectedColor;\n      }\n      let currentX;\n      let currentY;\n      var canvasPosition = this.canvasElement.getBoundingClientRect();\n        if(ev.type == 'touchstart' || ev.type == 'touchmove' || ev.type == 'touchend'){\n          var touch = ev.touches[0] || ev.changedTouches[0];\n          currentX = touch.pageX- canvasPosition.x;\n          currentY= touch.pageY- canvasPosition .y;\n        }\n        else{\n          currentX = ev.pageX - canvasPosition.x;\n          currentY = ev.pageY - canvasPosition.y;\n        }\n      this.ctx.lineJoin = 'round';\n      this.ctx.strokeStyle = selectcolor;\n      this.ctx.lineWidth = this.lineWidth;\n      this.ctx.beginPath();\n      this.ctx.moveTo(this.saveX, this.saveY);\n      this.ctx.lineTo(currentX, currentY);\n      this.ctx.closePath();\n      this.ctx.stroke();\n      this.saveX = currentX;\n      this.saveY = currentY;\n      this.mousedown.x=this.saveX;\n      this.mousedown.y=this.saveY;\n    }\n    seguimiento(ev){\n      let currentX;\n      let currentY;\n      var canvasPosition = this.canvasElement.getBoundingClientRect();\n      if(ev.type == 'touchstart' || ev.type == 'touchmove' || ev.type == 'touchend'){\n        var touch = ev.touches[0] || ev.changedTouches[0];\n        currentX = touch.pageX- canvasPosition.x;\n        currentY= touch.pageY- canvasPosition .y;\n      }\n      else{\n        currentX = ev.pageX - canvasPosition.x;\n        currentY = ev.pageY - canvasPosition.y;\n      }\n      this.saveX = currentX;\n      this.saveY = currentY;\n      this.mousedown.x=this.saveX;\n      this.mousedown.y=this.saveY;\n    }\n    selectColor(color) {\n      this.selectedColor = color;\n    }\n    MousePosition(ev){\n      let currentX;\n      let currentY;\n      // Get canvas size and position in web page\n      let canvasSizeData =this.canvasElement.getBoundingClientRect();\n      if(ev.type == 'touchstart' || ev.type == 'touchmove' || ev.type == 'touchend'){\n        var touch = ev.touches[0] || ev.changedTouches[0];\n        currentX = touch.pageX - canvasSizeData.x;\n        currentY = touch.pageY - canvasSizeData .y;\n      }\n      else{\n        currentX = ev.pageX - canvasSizeData.x;\n        currentY = ev.pageY - canvasSizeData.y;\n      }\n      return { X: currentX,\n          Y: currentY\n        };\n    }\n    moved(ev) {\n      if (this.currentTool=='brush'||this.currentTool=='eraser') {\n         this.brush(ev);\n      }\n      else if(this.usingBrush==false){\n        if(this.drawing){\n          this.seguimiento(ev);\n        this.RedrawCanvasImage();\n        this.UpdateRubberbandOnMove(this.loc,ev);\n        }\n      }\n      this.cont=0;\n    }\n  SaveCanvasImage(){\n      // Save image\n      this.savedImageData = this.ctx.getImageData(0,0,this.canvasElement.width,this.canvasElement.height);\n  }\n  RedrawCanvasImage(){\n      // Restore image\n      this.ctx.putImageData(this.savedImageData,0,0);\n  }  \n    radiansToDegrees(rad){\n      if(rad < 0){\n          // Correct the bottom error by adding the negative\n          // angle to 360 to get the correct result around\n          // the whole circle\n          return (360.0 + (rad * (180 / Math.PI))).toFixed(2);\n      } else {\n          return (rad * (180 / Math.PI)).toFixed(2);\n      }\n  }\n  getPolygon(){\n    let polygonPoints = this.getPolygonPoints();\n    this.ctx.beginPath();\n    this.ctx.moveTo(polygonPoints[0].x, polygonPoints[0].y);\n    for(let i = 1; i < this.polygonSides; i++){\n      this.ctx.lineTo(polygonPoints[i].x, polygonPoints[i].y);\n    }\n    this.ctx.closePath();\n}\n  // Converts degrees to radians\n  degreesToRadians(degrees){\n      return degrees * (Math.PI / 180);\n  }\n  getAngleUsingXAndY(mouselocX, mouselocY){\n    let adjacent = this.mousedown.x - mouselocX;\n    let opposite = this.mousedown.y - mouselocY;\n    return this.radiansToDegrees(Math.atan2(opposite, adjacent));\n}\n    getPolygonPoints(){\n      // Get angle in radians based on x & y of mouse location\n      let angle =  this.degreesToRadians(this.getAngleUsingXAndY(this.loc.x, this.loc.y));\n      // X & Y for the X & Y point representing the radius is equal to\n      // the X & Y of the bounding rubberband box\n      let radiusX = this.shapeBoundingBox.width;\n      let radiusY = this.shapeBoundingBox.height;\n      // Stores all points in the polygon\n      let polygonPoints = [];\n      // Each point in the polygon is found by breaking the \n      // parts of the polygon into triangles\n      // Then I can use the known angle and adjacent side length\n      // to find the X = mouseLoc.x + radiusX * Sin(angle)\n      // You find the Y = mouseLoc.y + radiusY * Cos(angle)\n      for(let i = 0; i < this.polygonSides; i++){\n          polygonPoints.push(new PolygonPoint(this.loc.x + radiusX * Math.sin(angle),\n         this.loc.y - radiusY * Math.cos(angle)));\n          // 2 * PI equals 360 degrees\n          // Divide 360 into parts based on how many polygon \n          // sides you want \n          angle += 2 * Math.PI / this.polygonSides;\n      }\n      return polygonPoints;\n  }\n  drawRubberbandShape(loc,ev){\n      this.ctx.strokeStyle = this.selectedColor;\n      this.ctx.fillStyle = this.selectedColor;\n        if(this.currentTool === \"line\"){\n          this.ctx.beginPath();\n          this.ctx.moveTo(this.mousedown.x, this.mousedown.y);\n          this.ctx.lineTo(this.loc.x,this.loc.y);\n          this.ctx.stroke();\n        }else if(this.currentTool === \"rectangle\"){\n        // Creates rectangles\n       this.ctx.strokeRect(this.shapeBoundingBox.left, this.shapeBoundingBox.top, this.shapeBoundingBox.width, this.shapeBoundingBox.height);\n         }\n         else if(this.currentTool === \"circle\"){\n          // Create circles\n          //this.RedrawCanvasImage();\n          let radius = this.shapeBoundingBox.width;\n          this.ctx.beginPath();\n          this.ctx.arc(this.mousedown.x, this.mousedown.y, radius, 0, Math.PI * 2);\n          this.ctx.stroke();\n      } else if(this.currentTool === \"ellipse\"){\n      // Create ellipses\n      // Create ellipses\n      // ctx.ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle)\n      let radiusX = this.shapeBoundingBox.width / 2;\n      let radiusY = this.shapeBoundingBox.height / 2;\n      this.ctx.beginPath();\n      this.ctx.ellipse(this.mousedown.x, this.mousedown.y, radiusX, radiusY, Math.PI / 4, 0, Math.PI * 2);\n      this.ctx.stroke();\n      } else if(this.currentTool === \"polygon\"){\n          // Create polygons\n          this.getPolygon();\n          this.ctx.stroke();\n      }\n      else if(this.currentTool === \"text\"){\n        // Text\n        this.boton=true;\n        this.ctx.beginPath();\n        this.ctx.font=\"40px Arial\";\n        this.ctx.fillText(this.Textcontaux,this.loc.x,this.loc.y,this.shapeBoundingBox.width);\n      }\n    }\n    UpdateRubberbandSizeData(loc){\n      // Height & width are the difference between were clicked\n      // and current mouse position\n      this.shapeBoundingBox.width = Math.abs(loc.x - this.mousedown.x);\n      this.shapeBoundingBox.height = Math.abs(loc.y - this.mousedown.y);\n      // If mouse is below where mouse was clicked originally\n      if(loc.x > this.mousedown.x){\n          // Store mousedown because it is farthest left\n          this.shapeBoundingBox.left = this.mousedown.x;\n      } else {\n   \n          // Store mouse location because it is most left\n          this.shapeBoundingBox.left = loc.x;\n      }\n      // If mouse location is below where clicked originally\n      if(loc.y > this.mousedown.y){\n          // Store mousedown because it is closer to the top\n          // of the canvas\n          this.shapeBoundingBox.top = this.mousedown.y;\n      } else {\n   \n          // Otherwise store mouse position\n          this.shapeBoundingBox.top = loc.y;\n      }\n  }\n  UpdateRubberbandOnMove(loc,ev){\n      // Stores changing height, width, x & y position of most \n      // top left point being either the click or mouse location\n      this.UpdateRubberbandSizeData(loc);\n      // Redraw the shape\n      this.drawRubberbandShape(loc,ev);\n  }\n    setBackground() {\n      var background = new Image();\n      background.src = './assets/code.png';\n      let ctx = this.canvasElement.getContext('2d');\n      background.onload = () => {\n        ctx.drawImage(background,0,0, this.canvasElement.width, this.canvasElement.height);   \n      }\n    }\n    guardarnote(){\n      this.Textcont=this.Textcontaux;\n    }\n}\nclass PolygonPoint{\n  x;y;\n  constructor(X,Y) {\n      this.x = X,\n      this.y = Y;\n  }\n}"]}